<script lang="ts">
	type MoreLink = { label: string; href: string; underline?: boolean };
	type NoteItem = {
		id: string;
		sup: number | string;
		title: string;
		body: string; // plain HTML inline (no <p>)
		more?: MoreLink[]; // links for the â€œMehr:â€ line
	};

	const items: NoteItem[] = [
		{
			id: 'mutterschutz-vor',
			sup: 1,
			title: 'Mutterschutz vor Geburt',
			body: `
        Acht Wochen vor dem errechneten Geburtstermin gilt ein gesetzliches BeschÃ¤ftigungsverbot fÃ¼r werdende MÃ¼tter.
        Statt Lohn zahlt die Ã–GK das sogenannte <em>Wochengeld</em>, berechnet aus den letzten drei MonatsgehÃ¤ltern inklusive Sonderzahlungen;
        es entspricht meist dem Netto oder liegt leicht darÃ¼ber. FrÃ¼hgeburten verschieben die Frist â€“ fÃ¤llt der Zeitraum vor der Geburt kÃ¼rzer aus,
        verlÃ¤ngert sich der Mutterschutz danach entsprechend. Wichtig: Schwangerschaft rechtzeitig dem Arbeitgeber melden und den Antrag bei der Ã–GK stellen.
      `,
			more: [
				{
					label: 'AK Mutterschutz',
					href: 'https://www.arbeiterkammer.at/mutterschutzregelung',
					underline: true
				},
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'mutterschutz-nach',
			sup: 2,
			title: 'Mutterschutz nach Geburt',
			body: `
        Nach der Entbindung besteht ein BeschÃ¤ftigungsverbot von acht Wochen; bei FrÃ¼hgeburten, Mehrlingen oder Kaiserschnitt sind es mindestens zwÃ¶lf Wochen.
        Das Wochengeld lÃ¤uft wÃ¤hrend dieser Zeit weiter, sodass MÃ¼tter auch nach der Geburt finanziell abgesichert sind.
        Wird das Kind frÃ¼her geboren, wird die zu kurze Zeit vor der Geburt hinten drangehÃ¤ngt â€“ insgesamt meist 16 Wochen Schutzfrist.
        Erst danach beginnt die Karenz- und KBG-Phase.
      `,
			more: [
				{
					label: 'AK Mutterschutz',
					href: 'https://www.arbeiterkammer.at/mutterschutzregelung',
					underline: true
				},
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'eakbg',
			sup: 3,
			title: 'EinkommensabhÃ¤ngiges Kinderbetreuungsgeld (ea KBG)',
			body: `
        Das einkommensabhÃ¤ngige Kinderbetreuungsgeld ersetzt rund 80 % des letzten Nettoeinkommens (bis zum HÃ¶chstsatz)
        und beginnt <em>nach</em> dem Mutterschutz. Insgesamt sind â€“ bei Aufteilung â€“ maximal 14 Monate mÃ¶glich (typisch 12 + 2),
        pro Elternteil hÃ¶chstens 12 Monate, jede/r braucht mindestens 61 Tage eigenen Bezug.
        Voraussetzung: 182 Tage durchgehende ErwerbstÃ¤tigkeit vor Bezug, kein AMS-Bezug, Modellwahl ist fÃ¼r beide bindend.
      `,
			more: [
				{
					label: 'AK Kinderbetreuungsgeld',
					href: 'https://www.arbeiterkammer.at/beratung/berufundfamilie/kinderbetreungsgeld/Kinderbetreuungsgeld.html',
					underline: true
				},
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'sonderleistung-1',
			sup: 4,
			title: 'Sonderleistung I',
			body: `
        Wenn ein Elternteil die 182-Tage-ErwerbstÃ¤tigkeitsvoraussetzung fÃ¼rs ea KBG nicht erfÃ¼llt, kann die
        â€Sonderleistung Iâ€œ (rund 41 â‚¬/Tag) beantragt werden. So bleibt das Modell nutzbar, auch wenn der zweite Elternteil
        die Bedingung nicht erfÃ¼llt. Antrag rechtzeitig bei der Ã–GK stellen und Nachweise bereithalten.
      `,
			more: [
				{ label: 'Anspruch prÃ¼fen', href: '/eakbg-anspruch', underline: true },
				{ label: 'FAQ: Sonderleistung I', href: '/faq#sonderleistung-1', underline: true },
				{
					label: 'AK KBG',
					href: 'https://www.arbeiterkammer.at/beratung/berufundfamilie/kinderbetreungsgeld/Kinderbetreuungsgeld.html',
					underline: true
				},
				{ label: 'Allgemeines FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'gemeinsamer-monat',
			sup: 5,
			title: 'Gemeinsamer Monat',
			body: `
        Eltern kÃ¶nnen bis zu 31 Tage gleichzeitig KBG beziehen â€“ die Gesamtdauer verkÃ¼rzt sich um diese Tage.
        Beide mÃ¼ssen mindestens 61 Tage eigenen Bezug haben. Der gemeinsame Monat eignet sich gut fÃ¼r Ãœbergabe oder
        gemeinsame EingewÃ¶hnung. Wichtig: VerkÃ¼rzung im Zeitplan berÃ¼cksichtigen und Wechsel rechtzeitig bei der Ã–GK anmelden.
      `,
			more: [
				{
					label: 'AK KBG',
					href: 'https://www.arbeiterkammer.at/beratung/berufundfamilie/kinderbetreungsgeld/Kinderbetreuungsgeld.html',
					underline: true
				},
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'papamonat-fzb',
			sup: 6,
			title: 'Papamonat (und Familienzeitbonus)',
			body: `
        Der Papamonat ist ein Monat Freistellung ab Entlassung von Mutter und Kind aus dem Krankenhaus bis zum Ende des Mutterschutzes.
        Der Arbeitgeber zahlt kein Gehalt, aber es gibt den Familienzeitbonus (ca. 28â€“31 Tage, eigener Antrag).
        Voraussetzung: 182 Tage ErwerbstÃ¤tigkeit vor Beginn, kein AMS-Bezug im Beobachtungszeitraum, Antrag fristgerecht stellen.
        Das Recht auf Freistellung gilt unabhÃ¤ngig vom Bonus.
      `,
			more: [
				{ label: 'AK Papamonat', href: 'https://www.arbeiterkammer.at/papamonat', underline: true },
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		},
		{
			id: 'unbezahlte-karenz',
			sup: 7,
			title: 'Unbezahlte Karenz',
			body: `
        Nach Ende des KBG-Bezugs kann die Karenz ohne Zahlung verlÃ¤ngert werden â€“ der Arbeitsplatz bleibt gesichert.
        PrÃ¼ft Kranken- und Pensionsversicherung (z. B. Mitversicherung beim Partner; bei unverheirateten Paaren â€10 unbezahlte Monate HaushaltsfÃ¼hrungâ€œ).
        Arbeitgeber rechtzeitig informieren. Alternativen: Eltern-Teilzeit, Tagesmutter, GroÃŸeltern.
      `,
			more: [
				{
					label: 'FAQ: Unbezahlte Karenz organisieren',
					href: '/faq/#unbezahlte-karenz-organisieren',
					underline: true
				},
				{
					label: 'AK Karenz',
					href: 'https://www.arbeiterkammer.at/beratung/berufundfamilie/karenz',
					underline: true
				}
			]
		},
		{
			id: 'elternteilzeit',
			sup: 8,
			title: 'Eltern-Teilzeit',
			body: `
        Anspruch besteht in Betrieben mit mehr als 20 BeschÃ¤ftigten und nach drei Jahren BetriebszugehÃ¶rigkeit,
        mÃ¶glich bis zum 8. Geburtstag des Kindes. Ohne Anspruch ist eine â€vereinbarte Elternteilzeitâ€œ mÃ¶glich, wenn der Arbeitgeber zustimmt.
        Wichtig: rechtzeitig melden und Lage/Umfang der Arbeitszeit fixieren; beide Eltern kÃ¶nnen gleichzeitig Teilzeit arbeiten.
      `,
			more: [
				{
					label: 'AK Elternteilzeit',
					href: 'https://www.arbeiterkammer.at/elternteilzeit',
					underline: true
				},
				{ label: 'FAQ', href: '#faq', underline: true }
			]
		}
	];

	// collapsed by default
	let open = $state(false);
</script>

<!-- Accessible, native collapsible wrapper -->
<details class="group rounded-2xl border border-neutral-200/70 bg-white shadow-sm" bind:open>
	<summary
		class="flex w-full cursor-pointer items-center justify-between gap-3 rounded-2xl px-4 py-3 text-slate-800/90 outline-none select-none
             focus-visible:ring-2 focus-visible:ring-indigo-600/60 focus-visible:ring-offset-2 focus-visible:ring-offset-white md:px-5 md:py-4"
		aria-label="Glossar zur Elternkarenz ein- und ausklappen"
	>
		<div class="flex items-center gap-3">
			<div class="flex flex-col">
				<span class="text-base font-semibold text-slate-900 sm:text-lg"
					>Die Begriffe kurz erklÃ¤rt</span
				>
			</div>
		</div>
		<svg
			class="h-5 w-5 shrink-0 transition-transform duration-200 group-open:rotate-180"
			viewBox="0 0 24 24"
			fill="none"
			aria-hidden="true"
		>
			<path
				d="M6 9l6 6 6-6"
				stroke="currentColor"
				stroke-width="2"
				stroke-linecap="round"
				stroke-linejoin="round"
			/>
		</svg>
	</summary>

	<!-- Collapsible content -->
	<aside
		class="note-box rounded-b-2xl border-t border-neutral-200/70 bg-neutral-50 p-4 shadow-sm md:p-6"
	>
		<div class="prose prose-sm max-w-none leading-tight">
			<h3 class="mb-2">ğŸš§ Die Begriffe kurz erklÃ¤rt â€“ in Arbeit ğŸš§</h3>
			<p class="mb-1 text-xs">
				Viele Begriffe &amp; Fristen â€“ keine Sorge, man blickt am Ende durch.
			</p>
			<p class="mb-1 text-xs">
				<span class="font-medium text-red-600"
					>Wichtig: Anspruchsvoraussetzungen und Fristen prÃ¼fen!</span
				>
				Der
				<a href="https://elternkalender.arbeiterkammer.at/index.html" class="underline"
					>AK-Elternkalender</a
				>
				hilft beim Fristen im Blick halten.
			</p>

			<!-- Two-column responsive layout â†’ 1â€“2, 3â€“4, 5â€“6 â€¦ -->
			<div class="grid gap-6 md:grid-cols-2">
				{#each items as it (it.id)}
					<section class="space-y-1.5">
						<h4 id={it.id}><sup>{it.sup}</sup> {it.title}</h4>

						<!-- body is 1 paragraph (no <p> in data) -->
						<p>{@html it.body}</p>

						{#if it.more?.length}
							<div class="mt-2 text-xs text-slate-700">
								<span class="mr-1 font-semibold">Mehr:</span>
								<!-- dot-separated links -->
								{#each it.more as link, i (link.href)}
									<a href={link.href} class={link.underline ? 'underline' : ''}>{link.label}</a
									>{#if i < it.more.length - 1}
										<span aria-hidden="true"> Â· </span>{/if}
								{/each}
							</div>
						{/if}
					</section>
				{/each}
			</div>

			<p class="mt-4 mb-0 text-xs">
				Hinweis: Auch der Vater kann den ersten Karenzteil Ã¼bernehmen.
			</p>
		</div>
	</aside>
</details>

<style>
	/* Hide default marker but keep native semantics */
	:global(details > summary::-webkit-details-marker) {
		display: none;
	}
	:global(details > summary) {
		list-style: none;
	}
</style>
